@import "bootstrap/scss/functions";
@import "bootstrap/scss/variables";
@import "bootstrap/scss/mixins";

// Definici√≥n de la paleta principal en variables SCSS
$color-brand: #e9786a;
$color-brand-600: #d96c60;
$color-brand-700: #c45f54;

// Definici√≥n de Variables CSS (Custom Properties) para el tema
:root {
    --brand: #{$color-brand};
    --brand-600: #{$color-brand-600};
    --brand-700: #{$color-brand-700};

    --surface: #ffffff;
    --surface-2: #f6f7f9;
    --text: #1f2937;
    --muted: #6b7280;
    --border: #e5e7eb;
    --shadow: 0 10px 30px rgba(0,0,0,.08);
}

// Override para Dark Mode
html[data-theme="dark"] {
    --surface: #111315;
    --surface-2: #1a1d20;
    --text: #e5e7eb;
    --muted: #9ca3af;
    --border: #2b2f33;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    
    // üî• CORRECCI√ìN DE ESPECIFICIDAD APLICADA AQU√ç (Tablas y Formularios)
    
    // Tablas
    .table {
        // Asegura que el color de texto de la tabla sea claro en Dark Mode
        color: var(--text); 
        
        tbody td {
            color: var(--text); 
        }

        tbody tr {
            background: var(--surface);
            border-color: var(--border);
            
            &:hover {
                background: var(--surface-2);
            }
        }
    }
    
    // Formularios
    .form-control, .form-select {
        background: var(--surface);
        color: var(--text);
        border-color: var(--border);
    }
    
    .input-group-text {
        background: var(--surface-2);
        border-color: var(--border);
        color: var(--muted);
    }
    
    // Botones Outline gen√©ricos (Asegura visibilidad en Dark Mode)
    // Se deja el ciclo SCSS fuera del selector de HTML ya que usa variables de SCSS
}

// Importaci√≥n de M√≥dulos (parciales de componentes)
@import "modules/dashboard";
@import "modules/inventario_dispositivos";
@import "modules/licencias";
@import "modules/articulos";
@import "modules/bitacora_respaldo";
@import "modules/monitoreo_red";
@import "modules/reporte_actividades";
@import "modules/colaboradores";
@import "modules/usuarios-ti";
@import "modules/admin_bajas";

// Importaci√≥n final de Bootstrap
@import "bootstrap/scss/bootstrap";

// --- Estilos Base y Layout ---

body {
    background: var(--surface-2);
    color: var(--text);
    transition: background-color 0.3s ease, color 0.3s ease;
}

.app-shell {
    min-height: 100vh;
    display: grid;
    grid-template-rows: auto 1fr auto;
}

a, .btn-link {
    text-decoration: none;
    transition: color 0.2s;
}

// Topbar
.app-topbar {
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    box-shadow: var(--shadow);

    .navbar-brand {
        color: var(--text);
        font-weight: 700;
        transition: color 0.3s ease;
    }
}

// Sidebar
.app-sidebar {
    width: 280px;
    background: var(--surface);
    border-right: 1px solid var(--border);
    transition: background-color 0.3s ease, border-color 0.3s ease;

    .offcanvas-header {
        border-bottom: 1px solid var(--border);
    }

    .app-menu .nav-link {
        color: var(--text);
        border-radius: .75rem;
        padding: .6rem .9rem;
        margin: .125rem .25rem;
        transition: background-color 0.2s ease, color 0.2s ease;

        &:hover {
            background: var(--surface-2);
        }
        &.active {
            color: #fff;
            background: var(--brand);
            font-weight: 600;
        }
    }
}

// Contenido principal
.app-content {
    padding: 1.25rem;

    @media (min-width: 992px){
        padding: 2rem;
    }
}

// Footer
.app-footer {
    background: var(--surface);
    border-top: 1px solid var(--border);
    color: var(--muted);
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

// --- Componentes ---

.brand-logo {
    width: 28px;
    height: 28px;
    object-fit: contain;
}
.brand-title {
    font-weight: 700;
}

.app-topbar {
    .btn-icon {
        color: var(--text);
        background: transparent;
        border: 1px solid var(--border);
        border-radius: .75rem;
        padding: .25rem .5rem;
        line-height: 1;
        transition: background-color 0.2s ease, border-color 0.2s ease;

        &:hover {
            background: var(--surface-2);
        }
    }
    .btn-user {
        background: transparent;
        border: 1px solid var(--border);
        border-radius: 999px;
        padding: .35rem .75rem;
        transition: background-color 0.2s ease, border-color 0.2s ease;

        &:hover {
            background: var(--surface-2);
        }
    }
}

.app-content .card {
    border: 1px solid var(--border);
    background: var(--surface);
    box-shadow: var(--shadow);
    transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

.btn-brand {
    --bs-btn-bg: var(--brand);
    --bs-btn-border-color: var(--brand);
    --bs-btn-hover-bg: var(--brand-600);
    --bs-btn-hover-border-color: var(--brand-600);
    --bs-btn-active-bg: var(--brand-700);
    --bs-btn-active-border-color: var(--brand-700);
    color: #fff;
    font-weight: 600;
}

.badge-soft {
    color: var(--text);
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: .65rem;
    padding: .35rem .6rem;
    font-weight: 500;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

// --- Tablas (Estilos generales, no espec√≠ficos de Dark Mode) ---
.table {
    // Forzamos el color del texto para toda la tabla (Se queda para Light Mode)
    color: var(--text); 

    thead th {
        background: var(--brand);
        color: #fff;
        border-color: var(--brand);
        vertical-align: middle;
    }
    
    // Estas reglas se eliminan de aqu√≠ ya que se movieron arriba a html[data-theme="dark"]
}

// --- Formularios (Estilos generales, no espec√≠ficos de Dark Mode) ---
.form-control, .form-select {
    // Solo dejamos la regla :focus aqu√≠, la de color y fondo est√° en el Dark Mode Override
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;

    &:focus {
        border-color: var(--brand);
        box-shadow: 0 0 0 .25rem rgba(233,120,106,.25);
    }
}

.input-group-text {
    // Estas reglas se eliminan de aqu√≠ ya que se movieron arriba a html[data-theme="dark"]
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

// --- Botones Outline gen√©ricos (Asegura visibilidad en Dark Mode) ---
// Este bloque usa variables SCSS de Bootstrap ($theme-colors) por lo que es mejor dejarlo aqu√≠.
@each $color, $value in $theme-colors {
    .btn-outline-#{$color} {
        color: var(--text);
        border-color: var(--border);
        
        &:hover {
            color: var(--surface);
            background-color: var(--brand); // Usa la marca para cualquier hover
            border-color: var(--brand);
        }
    }
}
.btn-outline-secondary {
    color: var(--text);
    border-color: var(--border);
    &:hover {
        color: var(--surface);
        background-color: var(--muted);
        border-color: var(--muted);
    }
}
.btn-outline-dark {
    // En Dark Mode, btn-outline-dark se vuelve invisible. Lo remapeamos.
    color: var(--text);
    border-color: var(--border);
    &:hover {
        color: var(--surface);
        background-color: var(--text);
        border-color: var(--text);
    }
}


// --- Media Queries ---
@media (max-width: 991px) {
    .app-topbar .brand-title {
        display: none;
    }
    .app-content {
        padding: 1rem;
    }
}
